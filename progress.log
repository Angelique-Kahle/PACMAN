Progress Log
------------------

10.07.20
---------
* building a template reduction pipeline

25.08.20
---------
* Changed format of obs_par into yaml and adapted zero_extract.py to the new file format
* line 2267 of mpfit.py used numpy.rank. This function is depreciated and was replaced with numpy.ndim
* zero_extract.py: Got rid of pyfits
* zero_extract.py: Includes a calculation of visit and orbit number.
* zero_extract.py: Outputs a new file called filelist.txt which contains:
- all _ima.fits file names
- Their respective filter / grism
- #visit
- #orbit

27.08.20
---------
* Changed format of filelist.txt to astropy table
* Outsourced filelist.txt generation to "0.py"
* Updated calculation of norbits and nvisits; looks nice now
* last column of filelist.txt is the time from the first exposure now

15.09.20
---------
* renamed files
- zero_extract.py -> 1.py
- extract.py -> 2.py
* changes in 2.py:
- removed D_nointerpol
- removed cRate
- moved ancil class into ancil.py
- deleted calculation of visit and orbit (already exists in 0.py and therefore in filelist.txt)
- moved skyrmin etc for background calc into obs_par.yaml
* got 2.py to run

12.10.20
----------
* minor changes to 0.py
- added some comments
- usage of np.zeros() instead of .append() in for loops
- the list "filtergrism" renamed into "filter"
* minor changes to 1.py
- added some comments

13.10.20
----------
* 0.py
- scan direction is being checked and stored in filelist.txt
* 2.py
- ancil.grism determines if geometry.py or geometry102.py will be used


21.04.21
----------
* 2.py
- saves optionally every single trace plot etc.
* downloaded new horizons file from 2012 to May 2021
* moved horizons files and flats into new directory "ancil"




21.07.2021

https://www.stsci.edu/cgi-bin/get-visit-status?id=15856&markupFormat=html&observatory=HST
https://www.stsci.edu/hst/phase2-public/15856.pro

0,2,3,4,6


TODO
----
- renaming steps
- write readme with detailed instructions
- check if .ima files are already flat corrected
- get rid of mpfit!
- combine util/geometry.py and util/geometry102.py

obs_par.yaml includes some grism specific parameters like BEAMA_i -> generalize for both grisms
bin_spectroscopic_lc.py:
npix = 181 #width of spectrum in pixels (BEAMA_f - BEAMA_i)
BEAMA_f and BEAMA_i dependent on 141 or 102!

2.py:
replace newM with M
outsource background calculation (think of better way?)
timekeeping depreciated

convert fit_par.txt into yaml.... but how? directories of directories?

change period and t0 in obs_par.yaml


suntimecorr:
big .vec file makes bjd correction time-intensive


Questions:

obs_par:
rdnoise: 22.0
window: 150
--> used in lines 231 & 235 of 2.py

wavelengthsolutionoffset = 105.
line 282 in 2.py

spec vs var ?

scan direction
